#!/usr/bin/env python3
# vim: ft=python

import yaml
import sys
import os
import os.path

end_seq = {'LESS_TERMCAP_me': '\x1b[0m',
           'LESS_TERMCAP_ue': '\x1b[0m',
           'LESS_TERMCAP_se': '\x1b[0m'}

config_folder = os.environ.get('XDG_CONFIG_HOME',
                               os.path.expanduser('~/.config'))

with open(os.path.join(config_folder, 'mancolors'), 'r') as f:
    config = yaml.load(f, yaml.SafeLoader)
    os.environ.update(config | end_seq)

os.execv('/usr/bin/man', ['man',] + sys.argv[1:])
