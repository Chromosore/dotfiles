#!/usr/bin/env python3

from rich.progress import Progress, TextColumn, BarColumn
from argparse import ArgumentParser
import time

parser = ArgumentParser(
    description='Sleep with a fancy progress bar!')
parser.add_argument(
    'duration', type=int,
    help='The time you wish to sleep.')
parser.add_argument(
    '-d', '--description', type=str, default='',
    help='Give you fancy bar a fancy name!')
parser.add_argument(
    '-c', '--color', type=str, default='green', 
    help='Give your fancy bar a fancy color!')
args = parser.parse_args()

with Progress(
    TextColumn('[progress.description]{task.description}'),
    BarColumn(),
    TextColumn('[progress.percentage]{task.percentage:>3.0f}%'),
) as progress:
    task = progress.add_task(f'[{args.color}]{args.description}',
                             total=args.duration)

    while not progress.finished:
        progress.update(task, advance=1)
        time.sleep(1)
